var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);n.prototype=t.prototype,e.prototype=new n},core;!function(e){var t=function(){function t(){this.dispatchObj=e.ControllerDispatcher.getInstance(),this.eventList={}}return t.prototype.destroy=function(){if(null!=this.eventList){var e=void 0;for(var t in this.eventList){e=this.eventList[t];for(var n=0;n<e.length;n++)this.removeEventListener(t,e[0],e[1],!0)}this.eventList=null}this.dispatchObj=null},t.prototype.addEventListener=function(e,t,n){void 0===n&&(n=null);var o=this.dispatchObj.addEventListener(e,t,n);return o&&(null==this.eventList[e]&&(this.eventList[e]=[]),this.eventList[e].push([t,n])),o},t.prototype.addEventListeners=function(e,t){void 0===t&&(t=null);for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];for(var r=0;r<n.length;r++)this.addEventListener(n[r],e,t)},t.prototype.dispatchEvent=function(e){return this.dispatchObj.dispatchEvent(e)},t.prototype.hasEventListener=function(e){return this.dispatchObj.hasEventListener(e)},t.prototype.removeEventListenerAll=function(e,t){void 0===t&&(t=!1);var n=this.eventList[e];if(null!=n){for(var o=0;o<n.length;o++)this.removeEventListener(e,n[0],n[1],t);return delete this.eventList[e],!0}return!1},t.prototype.removeEventListener=function(e,t,n,o){void 0===n&&(n=null),void 0===o&&(o=!1);var r=this.dispatchObj.removeEventListener(e,t,n,o);if(r){var i=this.eventList[e];if(null!=i){for(var s=0;s<i.length;s++)if(i[s][0]==t&&i[s][1]==n){i.splice(s,1);break}0==i.length&&delete this.eventList[e]}}return r},t.prototype.removeEventListeners=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];for(var i=0;i<o.length;i++)this.removeEventListener(o[i],e,t,n)},t}();e.Controller=t,__reflect(t.prototype,"core.Controller",["core.IEventDispatcher","core.IBasicObject"])}(core||(core={}));var core;!function(e){var t=function(){function t(){this.dispatchObj=e.ControllerDispatcher.getInstance(),this.dispatchServerObj=e.ServiceDispatcher.getInstance(),this.eventList={},this.activateProtocolCallback=!0}return t.prototype.destroy=function(){if(this.activateProtocolCallback=!1,null!=this.eventList){var e=void 0;for(var t in this.eventList){e=this.eventList[t];for(var n=0;n<e.length;n++)this.removeEventListener(t,e[0],e[1],!0)}this.eventList=null}this.dispatchObj=null,this.dispatchServerObj=null},t.prototype.initModel=function(){},t.prototype.clearData=function(){},t.prototype.getModel=function(t){return e.ModelManage.getInstance().getModel(t)},t.prototype.isActivateProtocolCallback=function(){return this.activateProtocolCallback},t.prototype.setActivateProtocolCallback=function(e){this.activateProtocolCallback=e},t.prototype.addProtocolCallback=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;n++)this.addEventListener(e[n],this.protocolCallback,this)},t.prototype.protocolCallback=function(t){if(this.activateProtocolCallback){var n=this[t.getEventType()];if(null!=n){var o=e.String.getFunctionArgs(n);o.length==t.getParamCount()?n.apply(this,t.getParams()):e.Log.error("协议回调失败，函数定义参数与接收协议参数个数不匹配。数据类: "+e.String.getClassName_Obj(this)+" 中定义的回调函数: "+t.getEventType()+" 参数个数: "+o.length+" 接收协议参数个数: "+t.getParamCount())}else e.Log.error("协议回调失败，数据类: "+e.String.getClassName_Obj(this)+" 中未定义回调函数: "+t.getEventType())}},t.prototype.addEventListener=function(e,t,n){void 0===n&&(n=null);var o=this.dispatchServerObj.addEventListener(e,t,n);return o&&(null==this.eventList[e]&&(this.eventList[e]=[]),this.eventList[e].push([t,n])),o},t.prototype.addEventListeners=function(e,t){void 0===t&&(t=null);for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];for(var r=0;r<n.length;r++)this.addEventListener(n[r],e,t)},t.prototype.dispatchEvent=function(e){return this.dispatchObj.dispatchEvent(e)},t.prototype.hasEventListener=function(e){return this.dispatchServerObj.hasEventListener(e)},t.prototype.removeEventListenerAll=function(e,t){void 0===t&&(t=!1);var n=this.eventList[e];if(null!=n){for(var o=0;o<n.length;o++)this.removeEventListener(e,n[0],n[1],t);return this.eventList[e]=null,!0}return!1},t.prototype.removeEventListener=function(e,t,n,o){void 0===n&&(n=null),void 0===o&&(o=!1);var r=this.dispatchServerObj.removeEventListener(e,t,n,o);if(r){var i=this.eventList[e];if(null!=i){for(var s=0;s<i.length;s++)if(i[s][0]==t&&i[s][1]==n){i.splice(s,1);break}0==i.length&&(this.eventList[e]=null)}}return r},t.prototype.removeEventListeners=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];for(var i=0;i<o.length;i++)this.removeEventListener(o[i],e,t,n)},t}();e.Model=t,__reflect(t.prototype,"core.Model",["core.IEventDispatcher","core.IBasicObject"])}(core||(core={}));var core;!function(e){var t=function(t){function n(){return t.call(this)||this}return __extends(n,t),n.prototype.destroy=function(){this.parent=null,this.argList=null,this.viewLayerType=null,t.prototype.destroy.call(this)},n.prototype.open=function(){e.Log.error("所有继承 ViewController 的子类都必须重写 open() 方法，该方法在控制器被添加到显示列表时调用")},n.prototype.close=function(){e.Log.error("所有继承 ViewController 的子类都必须重写 close() 方法，该方法在控制器被移出显示列表时调用")},n.prototype.getParams=function(){return this.argList},n.prototype.setParams=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.argList=e},n.prototype.getParam=function(e){var t=null;return null!=this.argList&&this.argList.length>e&&(t=this.argList[e]),t},n.prototype.getParamCount=function(){return null==this.argList?0:this.argList.length},n.prototype.setParent=function(e,t){this.parent=e,this.viewLayerType=t},n.prototype.getParent=function(){return this.parent},n.prototype.getViewLayerType=function(){return this.viewLayerType},n.prototype.getModel=function(t){return e.ModelManage.getInstance().getModel(t)},n}(e.Controller);e.ViewController=t,__reflect(t.prototype,"core.ViewController")}(core||(core={}));var core;!function(e){var t=function(){function t(){this.eventList={}}return t.prototype.destroy=function(){this.eventList=null},t.prototype.addEventListener=function(t,n,o){void 0===o&&(o=null),null==this.eventList[t]&&(this.eventList[t]=new Array);for(var r,i=this.eventList[t],s=0;s<i.length;s++)if(r=i[s],r.compare(n,o))return e.Log.warning("添加事件监听失败，事件类型："+t+" 中的回调函数添加重复，请检查调用处是否正确调用"),!1;return i.push(new e.Callback(n,o)),!0},t.prototype.addEventListeners=function(e,t){void 0===t&&(t=null);for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];for(var r=0;r<n.length;r++)this.addEventListener(n[r],e,t)},t.prototype.dispatchEvent=function(e){if(null==this.eventList[e.getEventType()])return!1;e.setTarget(this);for(var t=this.eventList[e.getEventType()],n=new Array,o=0;o<t.length;o++)n.push(t[o]);e.setTarget(this);for(var o=0;o<n.length;o++)n[o].apply(e);return!0},t.prototype.hasEventListener=function(e){return null!=this.eventList[e]},t.prototype.removeEventListenerAll=function(e,t){if(void 0===t&&(t=!1),null==this.eventList[e])return!1;if(t)for(var n=this.eventList[e],o=n.length-1;o>=0;o--)n[o].destroy();return delete this.eventList[e],!0},t.prototype.removeEventListener=function(e,t,n,o){if(void 0===n&&(n=null),void 0===o&&(o=!1),null==this.eventList[e])return!1;for(var r,i=this.eventList[e],s=0;s<i.length;s++)if(r=i[s],r.compare(t,n))return o&&r.destroy(),i.splice(s,1),0==i.length&&delete this.eventList[e],!0;return!1},t.prototype.removeEventListeners=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];for(var i=0;i<o.length;i++)this.removeEventListener(o[i],e,t,n)},t}();e.EventDispatcher=t,__reflect(t.prototype,"core.EventDispatcher",["core.IEventDispatcher","core.IBasicObject"])}(core||(core={}));var core;!function(e){var t=function(){function t(){this._intervalIndex=0,this._cache={},this._loadingCache=new Array,this._intervalIndex=egret.setInterval(this.dealSoundTimer,this,6e4)}return t.prototype.destroy=function(){0!=this._intervalIndex&&(egret.clearInterval(this._intervalIndex),this._intervalIndex=0)},t.prototype.dealSoundTimer=function(){for(var t=egret.getTimer(),n=Object.keys(this._cache),o=0,r=n.length;r>o;o++){var i=n[o];this.checkCanClear(i)&&t-this._cache[i]>=e.SoundManager.CLEAR_TIME&&(delete this._cache[i],RES.destroyRes(i))}},t.prototype.getSound=function(e){var t=RES.getRes(e);if(t)this._cache[e]&&(this._cache[e]=egret.getTimer());else{if(-1!=this._loadingCache.indexOf(e))return null;this._loadingCache.push(e),RES.getResAsync(e,this.onResourceLoadComplete,this)}return t},t.prototype.onResourceLoadComplete=function(e,t){var n=this._loadingCache.indexOf(t);-1!=n&&(this._loadingCache.splice(n,1),this._cache[t]=egret.getTimer(),this.loadedPlay(t))},t.prototype.loadedPlay=function(e){},t.prototype.checkCanClear=function(e){return!0},t}();e.SoundBase=t,__reflect(t.prototype,"core.SoundBase",["core.IBasicObject"])}(core||(core={}));var core;!function(e){var t=function(t){function n(e){void 0===e&&(e=null);var n=t.call(this)||this;return n.percentHeight=100,n.percentWidth=100,n.addEventListener(egret.Event.ADDED_TO_STAGE,n.stageEvents,n),n.addEventListener(egret.Event.REMOVED_FROM_STAGE,n.stageEvents,n),null!=e&&n.reloaderSkin(e),n}return __extends(n,t),n.prototype.destroy=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.stageEvents,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.stageEvents,this),this.removeEventListener(eui.UIEvent.COMPLETE,this.loaderSkinCallback,this),this.stage.removeEventListener(egret.Event.RESIZE,this.changeViewFrameSize,this)},n.prototype.stageEvents=function(e){switch(e.type){case egret.Event.ADDED_TO_STAGE:this.stage.addEventListener(egret.Event.RESIZE,this.changeViewFrameSize,this),this.OnEnable();break;case egret.Event.REMOVED_FROM_STAGE:this.stage.removeEventListener(egret.Event.RESIZE,this.changeViewFrameSize,this),this.OnDisable()}},n.prototype.update=function(e){},n.prototype.OnEnable=function(){},n.prototype.OnDisable=function(){},n.prototype.changeWindowSize=function(e,t){},n.prototype.reloaderSkin=function(e){this.addEventListener(eui.UIEvent.COMPLETE,this.loaderSkinCallback,this),this.skinName=e},n.prototype.loaderSkinCallback=function(){this.removeEventListener(eui.UIEvent.COMPLETE,this.loaderSkinCallback,this),this.changeViewFrameSize(),this.loaderSkinComplete()},n.prototype.changeViewFrameSize=function(t){void 0===t&&(t=null);var n=document.documentElement.clientWidth,o=document.documentElement.clientHeight,r=n/o;n=r<e.GameConfig.designSizeAspectRatio?e.GameConfig.designSizeHeight*r:e.GameConfig.designSizeWidth,o=e.GameConfig.designSizeHeight,this.changeWindowSize(n,o)},n.prototype.loaderSkinComplete=function(){},n.prototype.getModel=function(t){return e.ModelManage.getInstance().getModel(t)},n}(eui.Component);e.UIView=t,__reflect(t.prototype,"core.UIView",["core.IBasicObject"])}(core||(core={}));var GameModel=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t.prototype.initModel=function(){},t}(core.Model);__reflect(GameModel.prototype,"GameModel");var core;!function(e){var t=function(){function e(){}return e.ConnectionSucceed="SocketEventType_ConnectionSucceed",e.ConnectionFailure="SocketEventType_ConnectionFailure",e.ReceiveData="SocketEventType_ReceiveData",e.Disconnect="SocketEventType_Disconnect",e}();e.SocketEventType=t,__reflect(t.prototype,"core.SocketEventType")}(core||(core={}));var Main=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),egret.ImageLoader.crossOrigin="anonymous",egret.registerImplementation("eui.IAssetAdapter",new AssetAdapter),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),core.CoreManage.getInstance().setDisplayObjectContainer(this),core.LoadingManage.getInstance().addConfig("resource/default.res.json","resource/"),core.LoadingManage.getInstance().loadConfig(this.onConfigComplete,this)},t.prototype.onConfigComplete=function(){var e=new eui.Theme("resource/default.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},t.prototype.onThemeLoadComplete=function(){core.LoadingManage.getInstance().loadGroup("loading",this.onLoadingResLoadComplete,null,this)},t.prototype.onLoadingResLoadComplete=function(){core.PageManage.getInstance().addViewControl(LoadingViewControl,core.ViewLayerType.SceneLayer)},t}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var ProtocolList=function(){function e(){}return e.GetProtocolArgs=function(t){var n=e.protocolList[t];return null==n&&core.Log.error("获取协议参数失败，协议名："+t+"　未在协议列表[ProtocolList.protocolList]中定义"),n},e.protocolList={CheckUser_Jump:["uid","uname","roomid","iconURL"],ReCheckUser_Jump:["uid","uname","roomid","iconURL"],Ready_Jump:[],Move_Jump:["type","drop"],SendPing:[]},e}();__reflect(ProtocolList.prototype,"ProtocolList");var core;!function(e){var t=function(){function t(){}return t.start=function(n){null==t.pointList[n]?t.pointList[n]=e.Time.getUnixTimestamp_msec():e.Log.warning("DottingTimer 开始时间点错误，name: "+n+" 对象已存在，若要添加组打点，请调用 addition() 函数")},t.addition=function(n){if(null!=t.pointList[n]){var o=t.pointList[n];t.pointList[n]=e.Time.getUnixTimestamp_msec(),e.Log.print("DottingTimer_Addition "+n+": "+(t.pointList[n]-o))}else e.Log.warning("DottingTimer 增加时间点错误，name: "+n+" 对象未定义，请先调用 start 函数加入")},t.end=function(n){if(null!=t.pointList[n]){var o=t.pointList[n];t.pointList[n]=null,e.Log.print("DottingTimer_End "+n+": "+(e.Time.getUnixTimestamp_msec()-o))}else e.Log.warning("DottingTimer 结束时间点错误，name: "+n+" 对象不存在")},t.cleanup=function(){t.pointList={}},t.pointList={},t}();e.DottingTimer=t,__reflect(t.prototype,"core.DottingTimer")}(core||(core={}));var core;!function(e){var t=function(){function t(){}return t.print=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];e.DebugConfig.PrintLog&&(n.splice(0,0,e.Time.getClockTime()+"【"+t.PrintType+"】"),console.log.apply(console,n))},t.warning=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];e.DebugConfig.PrintLog&&(n.splice(0,0,e.Time.getClockTime()+"【"+t.WarningType+"】"),console.log.apply(console,n))},t.error=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(e.DebugConfig.PrintLog)throw new Error(t.analysisLog(t.ErrorType,n))},t.analysisLog=function(t,n){for(var o=e.Time.getClockTime()+"【"+t+"】",r=0;r<n.length;r++)o+=(0==r?" ":", ")+n[r];return o},t.PrintType="Print",t.WarningType="Warning",t.ErrorType="Error",t}();e.Log=t,__reflect(t.prototype,"core.Log")}(core||(core={}));var core;!function(e){var t=function(){function e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.eventType=e,this.argList=t}return e.prototype.destroy=function(){this.eventType=null,this.argList=null,this.target=null},e.prototype.getEventType=function(){return this.eventType},e.prototype.getTarget=function(){return this.target},e.prototype.setTarget=function(e){this.target=e},e.prototype.getParams=function(){return this.argList},e.prototype.setParams=function(e){this.argList=e},e.prototype.getParam=function(e){var t=null;return this.argList.length>e&&(t=this.argList[e]),t},e.prototype.getParamCount=function(){return this.argList.length},e}();e.Event=t,__reflect(t.prototype,"core.Event",["core.IBasicObject"])}(core||(core={}));var core;!function(e){var t=function(){function t(){return t._create?(e.ModelManage.getInstance().initModels(),void(this.pageManage=e.PageManage.getInstance())):void e.Log.error("CoreManage 单例类，不能通过构造函数实例化。请使用 CoreManage.getInstance() 方法访问该实例")}return t.getInstance=function(){return null==t._instance&&(t._create=!0,t._instance=new t,t._create=!1),t._instance},t.prototype.setDisplayObjectContainer=function(t){var n=e.DisplayManage.getInstance();null!=n.updateFun&&n.updateFun.destroy(),n.updateFun=new e.Action1(this.update,this),null!=n.parent&&n.parent.removeChild(n),t.addChild(n)},t.prototype.update=function(e){null!=this.pageManage&&this.pageManage.update(e)},t.prototype.destroy=function(){this.pageManage.destroy(),this.pageManage=null,e.DisplayManage.getInstance().destroy(),e.ControllerDispatcher.getInstance().destroy(),e.ServiceDispatcher.getInstance().destroy(),e.DottingTimer.cleanup()},t}();e.CoreManage=t,__reflect(t.prototype,"core.CoreManage",["core.IBasicObject"])}(core||(core={}));var core;!function(e){var t=function(t){function n(){var o=this;return n._create?o=t.call(this)||this:void e.Log.error("ControllerDispatcher 单例类，不能通过构造函数实例化。请使用 ControllerDispatcher.getInstance() 方法访问该实例")}return __extends(n,t),n.getInstance=function(){return null==n._instance&&(n._create=!0,n._instance=new n,n._create=!1),n._instance},n.prototype.destroy=function(){n._instance=null,t.prototype.destroy.call(this)},n}(e.EventDispatcher);e.ControllerDispatcher=t,__reflect(t.prototype,"core.ControllerDispatcher")}(core||(core={}));var core;!function(e){var t=function(t){function n(){var o=this;return n._create?o=t.call(this)||this:void e.Log.error("ServiceDispatcher 单例类，不能通过构造函数实例化。请使用 ServiceDispatcher.getInstance() 方法访问该实例")}return __extends(n,t),n.getInstance=function(){return null==n._instance&&(n._create=!0,n._instance=new n,n._create=!1),n._instance},n.prototype.destroy=function(){n._instance=null,t.prototype.destroy.call(this)},n}(e.EventDispatcher);e.ServiceDispatcher=t,__reflect(t.prototype,"core.ServiceDispatcher")}(core||(core={}));var core;!function(e){var t=function(){function t(){return this._groupIndex=0,t._create?(this._configs=new Array,this._groups={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceLoadProgress,this),void RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this)):void e.Log.error("LoadingManage 单例类，不能通过构造函数实例化。请使用 LoadingManage.getInstance() 方法访问该实例")}return t.getInstance=function(){return null==t._instance&&(t._create=!0,t._instance=new t,t._create=!1),t._instance},t.prototype.destroy=function(){t._instance=null},t.prototype.addConfig=function(e,t){this._configs.push([e,t])},t.prototype.loadConfig=function(e,t){this._onConfigComplete=e,this._onConfigCompleteTarget=t,this.loadNextConfig()},t.prototype.loadNextConfig=function(){if(0==this._configs.length)return this._onConfigComplete.call(this._onConfigCompleteTarget),this._onConfigComplete=null,void(this._onConfigCompleteTarget=null);var e=this._configs.shift();RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),RES.loadConfig(e[0],e[1])},t.prototype.onConfigCompleteHandle=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),this.loadNextConfig()},t.prototype.loadGroup=function(e,t,n,o){this._groups[e]=[t,n,o],RES.loadGroup(e)},t.prototype.loadGroups=function(e,t,n,o,r){RES.createGroup(e,t,!0),this.loadGroup(e,n,o,r)},t.prototype.pilfererLoadGroup=function(e,t){void 0===t&&(t=null);var n="pilferer_"+e;t||(t=[e]),RES.createGroup(n,t,!0),RES.loadGroup(n,-1)},t.prototype.onResourceLoadComplete=function(e){var t=e.groupName;if(this._groups[t]){var n=this._groups[t][0],o=this._groups[t][2];null!=n&&n.call(o),this._groups[t]=null,delete this._groups[t]}},t.prototype.onResourceLoadProgress=function(e){var t=e.groupName;if(this._groups[t]){var n=this._groups[t][1],o=this._groups[t][2];null!=n&&n.call(o,e.itemsLoaded,e.itemsTotal)}},t.prototype.onResourceLoadError=function(t){e.Log.warning(t.groupName+"资源组有资源加载失败"),this.onResourceLoadComplete(t)},t.prototype.loadResource=function(e,t,n,o,r){void 0===e&&(e=[]),void 0===t&&(t=[]),void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r=null);var i=e.concat(t),s="loadGroup"+this._groupIndex++;RES.createGroup(s,i,!0),this._groups[s]=[n,o,r],RES.loadGroup(s)},t}();e.LoadingManage=t,__reflect(t.prototype,"core.LoadingManage",["core.IBasicObject"])}(core||(core={}));var core;!function(e){var t=function(t){function n(){var o=this;return n._create?(o=t.call(this)||this,o.sceneLayer=new eui.UILayer,o.sceneLayer.touchEnabled=!1,o.addChild(o.sceneLayer),o.windowLayer=new eui.UILayer,o.windowLayer.touchEnabled=!1,o.addChild(o.windowLayer),o.loaderLayer=new eui.UILayer,o.loaderLayer.touchEnabled=!1,o.addChild(o.loaderLayer),o.noticeLayer=new eui.UILayer,o.noticeLayer.touchEnabled=!1,o.addChild(o.noticeLayer),o.addEventListener(egret.Event.ENTER_FRAME,o.enterFrame,o),o.lastRunTime=e.Time.getUnixTimestamp_msec(),o):void e.Log.error("DisplayManage 单例类，不能通过构造函数实例化。请使用 DisplayManage.getInstance() 方法访问该实例")}return __extends(n,t),n.getInstance=function(){return null==n._instance&&(n._create=!0,n._instance=new n,n._create=!1),n._instance},n.prototype.destroy=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrame,this),null!=this.updateFun&&(this.updateFun.destroy(),this.updateFun=null),this.sceneLayer&&(this.sceneLayer.parent&&this.sceneLayer.parent.removeChild(this.sceneLayer),this.sceneLayer=null),this.windowLayer&&(this.windowLayer.parent&&this.windowLayer.parent.removeChild(this.windowLayer),this.windowLayer=null),this.loaderLayer&&(this.loaderLayer.parent&&this.loaderLayer.parent.removeChild(this.loaderLayer),this.loaderLayer=null),this.noticeLayer&&(this.noticeLayer.parent&&this.noticeLayer.parent.removeChild(this.noticeLayer),this.noticeLayer=null),this.parent&&this.parent.removeChild(this),n._instance=null},n.prototype.enterFrame=function(t){var n=e.Time.getUnixTimestamp_msec(),o=n-this.lastRunTime;this.lastRunTime=n,null!=this.updateFun&&this.updateFun.apply(o)},n}(eui.UILayer);e.DisplayManage=t,__reflect(t.prototype,"core.DisplayManage")}(core||(core={}));var core;!function(e){var t;!function(e){e[e.Undefined=0]="Undefined",e[e.SceneLayer=1]="SceneLayer",e[e.WindowLayer=2]="WindowLayer",e[e.LoaderLayer=3]="LoaderLayer",e[e.NoticeLayer=4]="NoticeLayer"}(t=e.ViewLayerType||(e.ViewLayerType={}));var n;!function(e){e[e.Undefined=0]="Undefined",e[e.Retain=1]="Retain",e[e.HideBefore=2]="HideBefore",e[e.HideBeforeAll=3]="HideBeforeAll",e[e.RemoveBefore=4]="RemoveBefore",e[e.RemoveBeforeAll=5]="RemoveBeforeAll"}(n=e.RemoveViewType||(e.RemoveViewType={}));var o=function(){function o(){return o._create?(this.controlList={},this.cacheControlList={},void(this.controlUpdateList={})):void e.Log.error("PageManage 单例类，不能通过构造函数实例化。请使用 PageManage.getInstance() 方法访问该实例")}return o.getInstance=function(){return null==o._instance&&(o._create=!0,o._instance=new o,o._create=!1),o._instance},o.prototype.destroy=function(){var e;for(var t in this.controlList){e=this.controlList[t];for(var n=0;n<e.length;n++)e[n].destroy()}e=null,this.controlList=null;for(var t in this.cacheControlList)this.cacheControlList[t].destroy();this.cacheControlList=null,this.controlUpdateList=null,o._instance=null},o.prototype.update=function(e){var t;for(var n in this.controlUpdateList){t=this.controlUpdateList[n];for(var o in t)t[o].update(e)}},o.prototype.addViewControl=function(o,r,i){void 0===i&&(i=n.Retain);for(var s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];var c,l,u=this.getControlList(r),h=e.String.getClassName(o);for(l=0;l<u.length;l++)if(u[l]instanceof o){c=u[l];break}switch(null!=c?(u.splice(l,1),this.removeUpdate(c)):(c=this.cacheControlList[h],null==c?c=new o:this.cacheControlList[h]=null),i){case n.HideBefore:this.removeControlList(u,!1);break;case n.HideBeforeAll:this.removeControlList(u,!1,-1);break;case n.RemoveBefore:this.removeControlList(u,!0);break;case n.RemoveBeforeAll:this.removeControlList(u,!0,-1)}switch(c.setParams.apply(c,s),u.push(c),r){case t.SceneLayer:this.removeControlAll(t.WindowLayer),c.setParent(e.DisplayManage.getInstance().sceneLayer,r);break;case t.WindowLayer:c.setParent(e.DisplayManage.getInstance().windowLayer,r);break;case t.LoaderLayer:c.setParent(e.DisplayManage.getInstance().loaderLayer,r);break;case t.NoticeLayer:c.setParent(e.DisplayManage.getInstance().noticeLayer,r)}return c.open(),this.addUpdate(c),c},o.prototype.getControl=function(e,t){for(var n,o=this.getControlList(t),r=0;r<o.length;r++)if(o[r]instanceof e){n=o[r];break}return n},o.prototype.removeControlAll=function(e,t){void 0===t&&(t=!1),this.removeControlList(this.getControlList(e),t,-1)},o.prototype.removeControl=function(t,n,o){void 0===o&&(o=!1);for(var r,i=this.getControlList(n),s=0;s<i.length;s++)if(r=i[s],i[s]instanceof t){if(i.splice(s,1),this.removeUpdate(r),o)r.destroy();else{var a=e.String.getClassName_Obj(r);null!=this.cacheControlList[a]&&this.cacheControlList[a].destroy(),this.cacheControlList[a]=r,r.close()}break}},o.prototype.removeControlList=function(t,n,o){if(void 0===o&&(o=1),null!=t){o>0&&(o=t.length-o),0>o&&(o=0);for(var r=void 0,i=t.length-1;i>=o;i--)if(r=t[i],t.splice(i,1),this.removeUpdate(r),n)r.destroy();else{var s=e.String.getClassName_Obj(r);null!=this.cacheControlList[s]&&this.cacheControlList[s].destroy(),this.cacheControlList[s]=r,r.close()}}},o.prototype.getControlList=function(n){var o;return n!=t.Undefined?(o=this.controlList[n],null==o&&(o=[],this.controlList[n]=o)):e.Log.error("获取视图列表失败，该视图类型不在识别范围 ViewLayerType: "+n),o},o.prototype.addUpdate=function(t){if(null!=t.update&&"function"==typeof t.update){null==this.controlUpdateList[t.getViewLayerType()]&&(this.controlUpdateList[t.getViewLayerType()]={});var n=e.String.getClassName_Obj(t);this.controlUpdateList[t.getViewLayerType()][n]=t}},o.prototype.removeUpdate=function(t){var n=this.controlUpdateList[t.getViewLayerType()];if(null!=n){var o=e.String.getClassName_Obj(t);null!=n[o]&&delete n[o],e.ObjectExtend.isEmptyObject(n)&&delete this.controlUpdateList[t.getViewLayerType()]}},o}();e.PageManage=o,__reflect(o.prototype,"core.PageManage",["core.IBasicObject"])}(core||(core={}));var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function o(o){t.call(n,o,e)}if(RES.hasRes(e)){var r=RES.getRes(e);r?o(r):RES.getResAsync(e,o,this)}else RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var core;!function(e){var t=function(){function t(){return t._create?(this.modelList={},void this.createModels()):void e.Log.error("ModelManage 单例类，不能通过构造函数实例化。请使用 ModelManage.getInstance() 方法访问该实例")}return t.getInstance=function(){return null==t._instance&&(t._create=!0,t._instance=new t,t._create=!1),t._instance},t.prototype.destroy=function(){for(var e in this.modelList)this.modelList[e].destroy();this.modelList=null,t._instance=null},t.prototype.createModels=function(){for(var t,n,o=ModelList.modelClassList.length,r=0;o>r;r++)t=ModelList.modelClassList[r],n=new t,this.modelList[e.String.getClassName(t)]=n},t.prototype.initModels=function(){for(var e in this.modelList)this.modelList[e].initModel()},t.prototype.clearDataModels=function(){for(var e in this.modelList)this.modelList[e].clearData()},t.prototype.getModel=function(t){var n=e.String.getClassName(t),o=this.modelList[n];return null==o&&e.Log.error("获取数据类 className: "+n+" 失败，该数据类不存在，请确认该类已添加到 ModelList 列表"),o},t}();e.ModelManage=t,__reflect(t.prototype,"core.ModelManage",["core.IBasicObject"])}(core||(core={}));var core;!function(e){var t=function(){function t(){t._create||e.Log.error("HttpRequestManage 单例类，不能通过构造函数实例化。请使用 HttpRequestManage.getInstance() 方法访问该实例"),this.requestList={}}return t.getInstance=function(){return null==t._instance&&(t._create=!0,t._instance=new t,t._create=!1),t._instance},t.prototype.destroy=function(){if(null!=this.requestList){var e;for(var n in this.requestList)e=this.requestList[n],e.removeEventListener(egret.Event.COMPLETE,this.onGetComplete,this),e.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),e.removeEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this);this.requestList=null}t._instance=null},t.prototype.send=function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var r=ProtocolList.GetProtocolArgs(t);if(null!=r){r.length!=n.length&&e.Log.error("发送的协议："+t+" 参数与定义参数不匹配，请检查调用处是否错误。定义参数："+r.length+" 传入参数："+n.length);var i={};i.name=t,i.params={};for(var s=0;s<r.length;s++)i.params[r[s]]=n[s];var a=JSON.stringify(i);e.Log.print("发送协议："+a);var c=new egret.HttpRequest;c.responseType=egret.HttpResponseType.TEXT,c.open(e.GameConfig.serverHttpRUL,egret.HttpMethod.POST),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(a),c.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this),c.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),c.addEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this),null==this.requestList[c.hashCode]?this.requestList[c.hashCode]=c:e.Log.error("HttpRequest 对象已存在，不能重复添加")}},t.prototype.onGetComplete=function(t){var n=t.currentTarget;n.removeEventListener(egret.Event.COMPLETE,this.onGetComplete,this),n.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),n.removeEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this),this.requestList[n.hashCode]=null,e.Log.print("接收协议："+n.response);var o=JSON.parse(n.response);e.String.isNullOrEmpty(o.name)?e.Log.warning("返回协议失败，协议名未定义"):e.ServiceDispatcher.getInstance().hasEventListener(o.name)?e.ServiceDispatcher.getInstance().dispatchEvent(new e.Event(o.name,o.params)):e.Log.warning("协议："+o.name+" 未定义回调函数，请确认该协议是否有效")},t.prototype.onGetIOError=function(t){var n=t.currentTarget;n.removeEventListener(egret.Event.COMPLETE,this.onGetComplete,this),n.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),n.removeEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this),this.requestList[n.hashCode]=null,e.Log.error("接收协议错误",t)},t.prototype.onGetProgress=function(t){e.Log.print("接收协议进度："+Math.floor(100*t.bytesLoaded/t.bytesTotal)+"%")},t}();e.HttpRequestManage=t,__reflect(t.prototype,"core.HttpRequestManage",["core.IBasicObject"])}(core||(core={}));var core;!function(e){var t=function(){function t(){}return t.sendNative=function(t,n){switch(void 0===n&&(n=null),null==n&&(n={}),egret.Capabilities.os){case"iOS":case"Android":if("onPKFinish"==t&&(null==window.nativeApp||null==window.nativeApp.onPKFinish)&&null!=window.TZOpen&&null!=window.TZOpen.getResult){var o=JSON.stringify(n);return e.Log.print("发送NativeCall name:"+t+" param:"+o),void window.TZOpen.getResult(o)}if(null!=window.nativeApp&&null!=window.nativeApp[t]){var o=JSON.stringify(n);e.Log.print("发送NativeCall name:"+t+" param:"+o),window.nativeApp[t](o)}break;default:e.Log.warning("发送NativeCall失败，平台未定义",egret.Capabilities.os," name:"+t," param:",JSON.stringify(n))}},t}();e.NativeCall=t,__reflect(t.prototype,"core.NativeCall")}(core||(core={}));var core;!function(e){var t;!function(e){e[e.Empty=0]="Empty",e[e.Connecting=1]="Connecting",e[e.ConnectionSucceed=2]="ConnectionSucceed",e[e.ConnectionFailure=3]="ConnectionFailure",e[e.Disconnect=4]="Disconnect"}(t=e.SocketState||(e.SocketState={}));var n=function(n){function o(){var e=n.call(this)||this;return e._socketState=t.Empty,e}return __extends(o,n),o.prototype.destroy=function(){this.close(),n.prototype.destroy.call(this)},o.prototype.getState=function(){return this._socketState},o.prototype.getDataType=function(){return null==this._socket?null:this._socket.type},o.prototype.connect=function(e,n,o){void 0===o&&(o=egret.WebSocket.TYPE_STRING),null!=this._socket&&this.close(),this._socketState=t.Connecting,o==egret.WebSocket.TYPE_BINARY&&(null!=this._receiveData?this._receiveData.clear():this._receiveData=new egret.ByteArray),this._socket=new egret.WebSocket,this._socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.socket_ReceiveMessage,this),this._socket.addEventListener(egret.Event.CONNECT,this.socket_Connect,this),this._socket.addEventListener(egret.Event.CLOSE,this.socket_Close,this),this._socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.socket_Error,this),this._socket.type=o,this._socket.connect(e,n)
},o.prototype.connectByUrl=function(e,n){void 0===n&&(n=egret.WebSocket.TYPE_STRING),null!=this._socket&&this.close(),this._socketState=t.Connecting,n==egret.WebSocket.TYPE_BINARY&&(null!=this._receiveData?this._receiveData.clear():this._receiveData=new egret.ByteArray),this._socket=new egret.WebSocket,this._socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.socket_ReceiveMessage,this),this._socket.addEventListener(egret.Event.CONNECT,this.socket_Connect,this),this._socket.addEventListener(egret.Event.CLOSE,this.socket_Close,this),this._socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.socket_Error,this),this._socket.type=n,this._socket.connectByUrl(e)},o.prototype.close=function(){null!=this._socket&&(this._socket.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.socket_ReceiveMessage,this),this._socket.removeEventListener(egret.Event.CONNECT,this.socket_Connect,this),this._socket.removeEventListener(egret.Event.CLOSE,this.socket_Close,this),this._socket.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.socket_Error,this),this._socket.close(),this._socket=null),this._socketState=t.Disconnect,null!=this._receiveData&&this._receiveData.clear()},o.prototype.socket_ReceiveMessage=function(t){this.getDataType()==egret.WebSocket.TYPE_BINARY?(this._socket.readBytes(this._receiveData),this.dispatchEvent(new e.Event(e.SocketEventType.ReceiveData,this.getDataType(),this._receiveData))):this.dispatchEvent(new e.Event(e.SocketEventType.ReceiveData,this.getDataType(),this._socket.readUTF()))},o.prototype.socket_Connect=function(n){this._socketState=t.ConnectionSucceed,this.dispatchEvent(new e.Event(e.SocketEventType.ConnectionSucceed))},o.prototype.socket_Close=function(t){this.close(),this.dispatchEvent(new e.Event(e.SocketEventType.Disconnect))},o.prototype.socket_Error=function(t){this.close(),this.dispatchEvent(new e.Event(e.SocketEventType.ConnectionFailure))},o.prototype.send=function(n){this._socketState==t.ConnectionSucceed?(this._socket.writeUTF(n),this._socket.flush()):e.Log.warning("尚未与服务器建立连接，不可发送协议")},o}(e.EventDispatcher);e.Socket=n,__reflect(n.prototype,"core.Socket")}(core||(core={}));var ModelList=function(){function e(){}return e.modelClassList=[GameModel],e}();__reflect(ModelList.prototype,"ModelList");var core;!function(e){var t=function(){function t(){t._create||e.Log.error("SocketManage 单例类，不能通过构造函数实例化。请使用 SocketManage.GetInstance() 方法访问该实例")}return t.getInstance=function(){return null==t._instance&&(t._create=!0,t._instance=new t,t._create=!1),t._instance},t.prototype.destroy=function(){this.closeSocket(),t._instance=null},t.prototype.getState=function(){return null==this._socket?e.SocketState.Empty:this._socket.getState()},t.prototype.createSocket=function(t,n,o){void 0===o&&(o=egret.WebSocket.TYPE_STRING),this.closeSocket(),e.Log.print("创建连接 ip:"+t+" post:"+n),this._socket=new e.Socket,this._socket.addEventListeners(this.socketLongCallback,this,e.SocketEventType.ConnectionSucceed,e.SocketEventType.ConnectionFailure,e.SocketEventType.Disconnect,e.SocketEventType.ReceiveData),this._socket.connect(t,n,o)},t.prototype.createSocketByUrl=function(t,n){void 0===n&&(n=egret.WebSocket.TYPE_STRING),this.closeSocket(),e.Log.print("创建连接 url:"+t),this._socket=new e.Socket,this._socket.addEventListeners(this.socketLongCallback,this,e.SocketEventType.ConnectionSucceed,e.SocketEventType.ConnectionFailure,e.SocketEventType.Disconnect,e.SocketEventType.ReceiveData),this._socket.connectByUrl(t,n)},t.prototype.closeSocket=function(){null!=this._socket&&(this._socket.removeEventListeners(this.socketLongCallback,this,!1,e.SocketEventType.ConnectionSucceed,e.SocketEventType.ConnectionFailure,e.SocketEventType.Disconnect,e.SocketEventType.ReceiveData),this._socket.destroy(),this._socket=null)},t.prototype.send=function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];if(null==this._socket)return void e.Log.warning("socket 未创建，发送协议前请先创建 socket");if(this._socket.getState()!=e.SocketState.ConnectionSucceed)return void e.Log.warning("socket 还未与服务器建立连接，请稍后");var r=ProtocolList.GetProtocolArgs(t);if(null!=r){if(r.length!=n.length)return void e.Log.error("发送的协议："+t+" 参数与定义参数不匹配，请检查调用处是否错误。定义参数："+r.length+" 传入参数："+n.length);var i={};i.name=t,i.params={};for(var s=0;s<r.length;s++)i.params[r[s]]=n[s];var a=JSON.stringify(i);e.Log.print("发送协议："+a),this._socket.send(a)}},t.prototype.socketLongCallback=function(t){switch(t.getEventType()){case e.SocketEventType.ConnectionSucceed:e.Log.print("连接成功"),this.DispatchEventToControl(t);break;case e.SocketEventType.ConnectionFailure:e.Log.print("连接失败"),this.DispatchEventToControl(t);break;case e.SocketEventType.Disconnect:e.Log.print("断开连接"),this.DispatchEventToControl(t);break;case e.SocketEventType.ReceiveData:this.AnalysisProtocol(t.getParam(0),t.getParam(1))}},t.prototype.AnalysisProtocol=function(t,n){var o;if(t==egret.WebSocket.TYPE_STRING){o=n,e.Log.print("接收协议："+o);var r=JSON.parse(o);e.String.isNullOrEmpty(r.name)?e.Log.warning("返回协议失败，协议名未定义"):this.HasEventListener(r.name)?this.DispatchEvent(new e.Event(r.name,r.params)):e.Log.warning("协议："+r.name+" 未定义回调函数，请确认该协议是否有效")}else e.Log.error("返回协议解析数据未定义，二进制数据解析未完善")},t.prototype.DispatchEvent=function(t){return e.ServiceDispatcher.getInstance().dispatchEvent(t)},t.prototype.DispatchEventToControl=function(t){return e.ControllerDispatcher.getInstance().dispatchEvent(t)},t.prototype.HasEventListener=function(t){return e.ServiceDispatcher.getInstance().hasEventListener(t)},t}();e.SocketManage=t,__reflect(t.prototype,"core.SocketManage",["core.IBasicObject"])}(core||(core={}));var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,n,o){function r(e){t.call(o,e)}function i(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),n.call(o))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var core;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t._currBgm="",t}return __extends(t,e),t.prototype.stop=function(){this._currSoundChannel&&this._currSoundChannel.stop(),this._currSoundChannel=null,this._currSound=null,this._currBgm=""},t.prototype.play=function(e,t){if(this._currBgm!=e){this.stop(),this._currBgm=e,this._loops=t;var n=this.getSound(e);n&&this.playSound(n,this._loops)}},t.prototype.playSound=function(e,t){this._currSound=e,this._currSoundChannel=this._currSound.play(0,t),this._currSoundChannel.volume=this._volume},t.prototype.setVolume=function(e){this._volume=e,this._currSoundChannel&&(this._currSoundChannel.volume=this._volume)},t.prototype.loadedPlay=function(e){this._currBgm==e&&this.playSound(RES.getRes(e),this._loops)},t.prototype.checkCanClear=function(e){return this._currBgm!=e},t}(e.SoundBase);e.SoundBgm=t,__reflect(t.prototype,"core.SoundBgm")}(core||(core={}));var core;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.play=function(e){var t=this.getSound(e);t&&this.playSound(t)},t.prototype.playSound=function(e){var t=e.play(0,1);t.volume=this._volume},t.prototype.setVolume=function(e){this._volume=e},t.prototype.loadedPlay=function(e){this.playSound(RES.getRes(e))},t}(e.SoundBase);e.SoundEffects=t,__reflect(t.prototype,"core.SoundEffects")}(core||(core={}));var core;!function(e){var t=function(){function t(){return t._create?(this.bgmOn=!0,this.effectOn=!0,this.bgmVolume=.5,this.effectVolume=.5,this.bgm=new e.SoundBgm,this.bgm.setVolume(this.bgmVolume),this.effect=new e.SoundEffects,void this.effect.setVolume(this.effectVolume)):void e.Log.error("SoundManager 单例类，不能通过构造函数实例化。请使用 SoundManager.getInstance() 方法访问该实例")}return t.getInstance=function(){return null==t._instance&&(t._create=!0,t._instance=new t,t._create=!1),t._instance},t.prototype.destroy=function(){},t.prototype.playEffect=function(e){this.effectOn&&this.effect.play(e)},t.prototype.playBgm=function(e,t){void 0===t&&(t=0),this.currBgm=e,this.bgmOn&&this.bgm.play(e,t)},t.prototype.stopBgm=function(){this.bgm.stop()},t.prototype.setEffectOn=function(e){this.effectOn=e},t.prototype.setBgmOn=function(e){this.bgmOn=e,this.bgmOn?this.currBgm&&this.playBgm(this.currBgm):this.stopBgm()},t.prototype.getBgmOn=function(){return this.bgmOn},t.prototype.getEffectOn=function(){return this.effectOn},t.prototype.setBgmVolume=function(e){e=Math.min(e,1),e=Math.max(e,0),this.bgmVolume=e,this.bgm.setVolume(this.bgmVolume)},t.prototype.getBgmVolume=function(){return this.bgmVolume},t.prototype.setEffectVolume=function(e){e=Math.min(e,1),e=Math.max(e,0),this.effectVolume=e,this.effect.setVolume(this.effectVolume)},t.prototype.getEffectVolume=function(){return this.effectVolume},t.CLEAR_TIME=18e4,t}();e.SoundManager=t,__reflect(t.prototype,"core.SoundManager",["core.IBasicObject"])}(core||(core={}));var core;!function(e){var t=function(){function t(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.list=new Array,null!=e&&this.add(e,t)}return t.prototype.destroy=function(){for(var e=0;e<this.list.length;e++)this.list[e].destroy();this.list=null},t.prototype.clean=function(){for(var e=0;e<this.list.length;e++)this.list[e].destroy();this.list=[]},t.prototype.add=function(t,n){for(var o,r=0;r<this.list.length;r++)if(o=this.list[r],o.compare(t,n))return e.Log.warning("Action 添加回调函数失败，该回调还是已添加，无需重复添加"),!1;return this.list.push(new e.Callback(t,n)),!0},t.prototype.remove=function(e,t){for(var n,o=0;o<this.list.length;o++)if(n=this.list[o],n.compare(e,t))return this.list.splice(o,1),!0;return!1},t.prototype.call=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n,o,r=0;r<this.list.length;r++)o=this.list[r],n=o.apply.apply(o,e);return n},t}();__reflect(t.prototype,"BasicAction",["core.IBasicObject"]);var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.apply=function(){return this.call()},t}(t);e.Action=n,__reflect(n.prototype,"core.Action");var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.apply=function(e){return this.call(e)},t}(t);e.Action1=o,__reflect(o.prototype,"core.Action1");var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.apply=function(e,t){return this.call(e,t)},t}(t);e.Action2=r,__reflect(r.prototype,"core.Action2");var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.apply=function(e,t,n){return this.call(e,t,n)},t}(t);e.Action3=i,__reflect(i.prototype,"core.Action3");var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.apply=function(e,t,n,o){return this.call(e,t,n,o)},t}(t);e.Action4=s,__reflect(s.prototype,"core.Action4");var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.apply=function(){return this.call()},t}(t);e.Func=a,__reflect(a.prototype,"core.Func")}(core||(core={}));var core;!function(e){var t=function(){function e(){}return e.convertAll=function(e,t){for(var n=new Array,o=0;o<e.length;o++)n.push(t.apply(e[o]));return n},e.contains=function(e,t){return e.indexOf(t)>=0},e.remove=function(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)},e.add=function(e,t){var n=e.indexOf(t);-1==n&&e.push(t)},e.AddRange=function(e,t){for(var n=0;n<t.length;n++)e.push(t[n])},e.Copy=function(e,t,n,o,r){for(var i=0;r>i;i++)n[o+i]=e[t],t++,t>=e.length&&(t=0)},e}();e.ArrayExtend=t,__reflect(t.prototype,"core.ArrayExtend")}(core||(core={}));var core;!function(e){var t=function(){function e(e,t){this.fun=e,this.obj=t}return e.prototype.destroy=function(){this.fun=null,this.obj=null},e.prototype.apply=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return null==this.fun?null:this.fun.apply(this.obj,e)},e.prototype.compare=function(e,t){return this.fun==e&&this.obj==t},e.prototype.getOjb=function(){return this.obj},e.prototype.getFun=function(){return this.fun},e}();e.Callback=t,__reflect(t.prototype,"core.Callback",["core.IBasicObject"])}(core||(core={}));var core;!function(e){var t=function(){function e(){this._keyList=new Array,this._valueList=new Array}return e.prototype.destroy=function(){this.Clear(),this._keyList=null,this._valueList=null},e.prototype.GetKeys=function(){return this._keyList},e.prototype.GetValues=function(){return this._valueList},e.prototype.Clear=function(){this._keyList.splice(0,this._keyList.length),this._valueList.splice(0,this._valueList.length)},Object.defineProperty(e.prototype,"Count",{get:function(){return this._keyList.length},enumerable:!0,configurable:!0}),e.prototype.Add=function(e,t){var n=this._keyList.indexOf(e);-1==n?(this._keyList.push(e),this._valueList.push(t)):this._valueList.splice(n,1,t)},e.prototype.Remove=function(e){var t=this._keyList.indexOf(e);return t>-1?(this._keyList.splice(t,1),this._valueList.splice(t,1),!0):!1},e.prototype.ContainsKey=function(e){var t=this._keyList.indexOf(e);return-1!=t},e.prototype.ContainsValue=function(e){var t=this._valueList.indexOf(e);return-1!=t},e.prototype.GetValue=function(e){var t=this._keyList.indexOf(e);return-1!=t?this._valueList[t]:null},e.prototype.GetKey=function(e){var t=this._valueList.indexOf(e);return-1!=t?this._keyList[t]:null},e}();e.Dictionary=t,__reflect(t.prototype,"core.Dictionary",["core.IBasicObject"])}(core||(core={}));var core;!function(e){var t=function(){function e(){}return e.crossMul=function(e,t){return e.x*t.y-e.y*t.x},e.checkCross=function(t,n,o,r){var i=egret.Point.create(t.x-o.x,t.y-o.y),s=egret.Point.create(n.x-o.x,n.y-o.y),a=egret.Point.create(r.x-o.x,r.y-o.y),c=e.crossMul(i,a)*e.crossMul(s,a);return i.x=o.x-t.x,i.y=o.y-t.y,s.x=r.x-t.x,s.y=r.y-t.y,a.x=n.x-t.x,a.y=n.y-t.y,0>=c&&e.crossMul(i,a)*e.crossMul(s,a)<=0?!0:!1},e}();e.MathExtend=t,__reflect(t.prototype,"core.MathExtend")}(core||(core={}));var core;!function(e){var t=function(){function e(){}return e.isEmptyObject=function(e){if(e)for(var t in e)return!1;return!0},e.getHashCode=function(e){for(var t=e.toString(),n=0,o=t.length,r=2147483648,i=0;o>i;i++)n=31*n+t.charCodeAt(i),n>2147483647&&(n%=r);return n},e}();e.ObjectExtend=t,__reflect(t.prototype,"core.ObjectExtend")}(core||(core={}));var core;!function(e){var t=function(){function e(e){void 0===e&&(e=null),this.value=e}return e}();e.OutValue=t,__reflect(t.prototype,"core.OutValue")}(core||(core={}));var core;!function(e){var t=function(){function e(){}return e.padLeft=function(e,t,n){return void 0===n&&(n="0"),(Array(t).join(n)+e).slice(-t)},e.padRight=function(e,t,n){return void 0===n&&(n="0"),(e+Array(t).join(n)).substring(0,t)},e.getClassName=function(e){return e.name},e.getClassName_Obj=function(e){return null!=e.__proto__&&null!=e.__proto__.__class__?e.__proto__.__class__:typeof e},e.getFunctionArgs=function(e){var t=e.toString().match(/function\s.*?\(([^)]*)\)/)[1];return t.split(",").map(function(e){return e.replace(/\/\*.*\*\//,"").trim()}).filter(function(e){return e})},e.isNullOrEmpty=function(e){return null==e||""==e},e.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(0==t.length)return null;for(var o=e,r=0;r<t.length;r++){var i=new RegExp("\\{"+r+"\\}","gm");o=o.replace(i,t[r])}return o},e.getQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?n[2]:null},e.uuid=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(0>=t&&(t=n.length),e>0)for(var r=0;e>r;r++)o[r]=n[0|Math.random()*t];else{var i=void 0;o[8]=o[13]=o[18]=o[23]="-",o[14]="4";for(var r=0;36>r;r++)o[r]||(i=0|16*Math.random(),o[r]=n[19==r?3&i|8:i])}return o.join("")},e.SHA1=function(t){for(var n,o=e.AlignSHA1(t),r=new Array(80),i=1732584193,s=-271733879,a=-1732584194,c=271733878,l=-1009589776,u=0;u<o.length;u+=16){for(var h=i,p=s,g=a,d=c,f=l,v=0;80>v;v++)16>v?r[v]=o[u+v]:r[v]=e.rol(r[v-3]^r[v-8]^r[v-14]^r[v-16],1),n=e.add(e.add(e.rol(i,5),e.ft(v,s,a,c)),e.add(e.add(l,r[v]),e.kt(v))),l=c,c=a,a=e.rol(s,30),s=i,i=n;i=e.add(i,h),s=e.add(s,p),a=e.add(a,g),c=e.add(c,d),l=e.add(l,f)}var y=e.SHA1hex(i)+e.SHA1hex(s)+e.SHA1hex(a)+e.SHA1hex(c)+e.SHA1hex(l);return y.toUpperCase()},e.SHA2=function(t){return e.SHA1(t).toLowerCase()},e.add=function(e,t){return(2147483647&e)+(2147483647&t)^2147483648&e^2147483648&t},e.SHA1hex=function(e){for(var t="0123456789abcdef",n="",o=7;o>=0;o--)n+=t.charAt(e>>4*o&15);return n},e.AlignSHA1=function(e){for(var t=(e.length+8>>6)+1,n=new Array(16*t),o=0;16*t>o;o++)n[o]=0;for(o=0;o<e.length;o++)n[o>>2]|=e.charCodeAt(o)<<24-8*(3&o);return n[o>>2]|=128<<24-8*(3&o),n[16*t-1]=8*e.length,n},e.rol=function(e,t){return e<<t|e>>>32-t},e.ft=function(e,t,n,o){return 20>e?t&n|~t&o:40>e?t^n^o:60>e?t&n|t&o|n&o:t^n^o},e.kt=function(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514},e}();e.String=t,__reflect(t.prototype,"core.String")}(core||(core={}));var core;!function(e){var t=function(){function t(){}return t.updateFrameCount=function(){t._frameCount++},t.getFrameCount=function(){return t._frameCount},t.updateDeltaTime=function(){if(0==t._deltaTimePoint)t._deltaTimePoint=t.getUnixTimestamp_msec(),t._deltaTime=0;else{var e=t.getUnixTimestamp_msec();t._deltaTime=(e-t._deltaTimePoint)/1e3,t._deltaTimePoint=e}},t.getDeltaTime=function(){return t._deltaTime},t.getProcessTime=function(){return t.getUnixTimestamp_msec()-t.processTime},t.getUnixTimestamp_sec=function(){return Date.now()/1e3},t.getUnixTimestamp_msec=function(){return Date.now()},t.getFullTime=function(){var t=new Date,n=t.getFullYear()+"-"+e.String.padLeft(t.getMonth(),2)+"-"+e.String.padLeft(t.getDay(),2)+" "+e.String.padLeft(t.getHours(),2)+":"+e.String.padLeft(t.getMinutes(),2)+":"+e.String.padLeft(t.getSeconds(),2)+"."+e.String.padLeft(t.getMilliseconds(),3);return n},t.getClockTime=function(){var t=new Date,n=e.String.padLeft(t.getHours(),2)+":"+e.String.padLeft(t.getMinutes(),2)+":"+e.String.padLeft(t.getSeconds(),2)+"."+e.String.padLeft(t.getMilliseconds(),3);return n},t.getServerTime=function(){return-1==t.serverTime&&t.setServerTime(t.getUnixTimestamp_sec()),t.serverTime+(t.getUnixTimestamp_sec()-t.getServerTimeLocalPoint)},t.setServerTime=function(e){t.serverTime=e,t.getServerTimeLocalPoint=t.getUnixTimestamp_sec()},t.timeScale=1,t._frameCount=0,t._deltaTime=0,t._deltaTimePoint=0,t.processTime=t.getUnixTimestamp_msec(),t.serverTime=-1,t}();e.Time=t,__reflect(t.prototype,"core.Time")}(core||(core={}));var core;!function(e){var t=function(){function t(){}return t.playLoop=function(t,n,o){void 0===n&&(n=!0),void 0===o&&(o=-1);for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];if(0==r.length){for(var s=void 0,a=0;a<t.items.length;a++)s=t.items[a],null==s.tween?null==s.props?s.props={loop:n}:s.props.loop=n:s.tween.loop=n;-1==o?t.play():t.play(o)}else for(var s=void 0,a=0;a<r.length;a++)s=t.items[r[a]],null!=s?(null==s.tween?null==s.props?s.props={loop:n}:s.props.loop=n:s.tween.loop=n,-1==o?t.play():t.play(o)):e.Log.error("播放动画对象失败，该对象索引:"+r[a]+" 超出动画组索引列表")},t}();e.TweenExtend=t,__reflect(t.prototype,"core.TweenExtend")}(core||(core={}));var core;!function(e){var t=function(){function e(){}return e.PrintLog=!1,e}();e.DebugConfig=t,__reflect(t.prototype,"core.DebugConfig")}(core||(core={}));var core;!function(e){var t;!function(e){e[e.Undefined=0]="Undefined",e[e.View=1]="View",e[e.Color=2]="Color"}(t=e.RichType||(e.RichType={}));var n=function(){function n(){}return n.create=function(e){var t,n=e.match("[a-zA-Z0-9]+");if(n&&n.length>=1)switch(n[0]){case"quad":t=new o;break;case"color":t=new r}return t},n.prototype.destroy=function(){this.clear()},n.prototype.clear=function(){this.richType=t.Undefined,this.index=-1},n.prototype.setInfo=function(e){e=e.slice(1,e.length-1);var t=e.split(" ");if(null!=t)for(var n=void 0,o=void 0,r=void 0,i=void 0,s=0,a=t.length;a>s;s++)r=t[s].match("(\\w+\\s*)=(\\s*[^\\b]+)"),r&&(n=r[1],o=r[2],i=this[n],null!=i&&("string"==typeof i?this[n]=o:"number"==typeof i&&(this[n]=Number(o))))},n.prototype.getRichType=function(){return this.richType},n.prototype.setIndex=function(t){0>t?e.Log.error("富文本对象设置索引错误，索引不能小于0"):this.index=t},n.prototype.getIndex=function(){return this.index},n}();e.RichInfo=n,__reflect(n.prototype,"core.RichInfo",["core.IBasicObject"]);var o=function(e){function n(){var n=e.call(this)||this;return n.name="",n.size=0,n.width=0,n.yoffset=0,n.richType=t.View,n}return __extends(n,e),n.prototype.clear=function(){this.name="",this.size=0,this.width=0,this.yoffset=0,e.prototype.clear.call(this)},n}(n);e.RichInfo_View=o,__reflect(o.prototype,"core.RichInfo_View");var r=function(e){function n(){var n=e.call(this)||this;return n.color="",n.endIndex=0,n.richType=t.Color,n}return __extends(n,e),n.prototype.clear=function(){this.color="",this.endIndex=0,e.prototype.clear.call(this)},n}(n);e.RichInfo_Color=r,__reflect(r.prototype,"core.RichInfo_Color")}(core||(core={}));var core;!function(e){var t=function(t){function n(){var n=t.call(this)||this;return n._originalContext="",n._context="",n._maxWidth=0,n._bitWide=0,n._bitHeight=0,n.tempDataList=new e.Dictionary,n.t_context=new egret.TextField,n.addChild(n.t_context),n._htmlText=new egret.HtmlTextParser,n.c_sprite=new egret.Sprite,n.addChild(n.c_sprite),n._bitWide=n.t_context.size/4,n._bitHeight=n.t_context.size+n.t_context.lineSpacing,n}return __extends(n,t),n.prototype.destroy=function(){this.t_context&&(this.t_context.parent&&this.t_context.parent.removeChild(this.t_context),this.t_context=null),this.c_sprite&&(this.c_sprite.removeChildren(),this.c_sprite.parent&&this.c_sprite.parent.removeChild(this.c_sprite),this.c_sprite=null),this._richInfoList=null,this._htmlText=null},n.prototype.clear=function(){this.t_context.textFlow=this._htmlText.parser(""),this.c_sprite.removeChildren(),this._richInfoList.splice(0),this._maxWidth=0,this._bitWide=0,this._bitHeight=0},n.prototype.setText=function(e){if(this._originalContext!=e){this._originalContext=e||"";var t=this.analysisRichText(this._originalContext);this._context=t[0],this._richInfoList=t[1],this.updateContent()}},n.prototype.getText=function(){return this._context},n.prototype.getOriginalText=function(){return this._originalContext},n.prototype.setColor=function(t){0>t||t>16777215?e.Log.warning("字体颜色值不在 0 ~ 0xffffff 取值范围"):this.t_context.textColor=t},n.prototype.getColor=function(){return this.t_context.textColor},n.prototype.setFontSize=function(t){1>t?e.Log.warning("字体大小不能小于1"):this.t_context.size!=t&&(this.t_context.size=t,this._bitWide=t/4,this._bitHeight=t+this.t_context.lineSpacing,this.updateContent())},n.prototype.getFontSize=function(){return this.t_context.size},n.prototype.setFont=function(t){e.String.isNullOrEmpty(t)?e.Log.warning("设置字体失败，字体名不能为空"):this.t_context.fontFamily=t},n.prototype.getFont=function(){return this.t_context.fontFamily},n.prototype.setMaxWidth=function(t){0>t?e.Log.warning("设置最大宽度失败，最大宽度不能小于0"):this._maxWidth!=t&&(this._maxWidth=this.width=t,this.updateContent())},n.prototype.getMaxWidth=function(){return this._maxWidth},n.prototype.setLineSpacing=function(e){this.t_context.lineSpacing=e,this._bitHeight=this.getFontSize()+e,this.updateContent()},n.prototype.getLineSpacing=function(){return this.t_context.lineSpacing},n.prototype.analysisRichText=function(t){for(var n,o,r="",i=new Array,s=t,a=s.length,c=s.length,l=0,u=0;;){if(l=s.lastIndexOf("<",a),-1==l){c>=0&&(n=s.slice(0,c),r=n+r);break}if(u=s.indexOf(">",l),-1!=u)if(u++,c>u?(n=s.slice(u,c),r=n+r,c=l):c-=u-l,n=s.slice(l,u),-1!=n.indexOf("</")){var h=n.match("[a-zA-Z0-9]+");null!=h&&h.length>=1&&(this.tempDataList.Add(h[0],s.length-u),s=s.slice(0,l)+s.slice(u,s.length))}else if(o=e.RichInfo.create(n)){switch(o.setInfo(n),o.setIndex(s.length-u),o.getRichType()){case e.RichType.Color:if(this.tempDataList.ContainsKey("color")){var p=this.tempDataList.GetValue("color");this.tempDataList.Remove("color"),o.endIndex=p}}i.splice(0,0,o),s=s.slice(0,l)+s.slice(u,s.length)}a=l-1}for(var g=s.length,d=0,f=i.length;f>d;d++)switch(o=i[d],o.setIndex(g-o.getIndex()),o.getRichType()){case e.RichType.Color:o.endIndex=g-o.endIndex}return[r,i]},n.prototype.updateContent=function(){if(null!=this._richInfoList&&null!=this._context){this.c_sprite.removeChildren();for(var t=new e.OutValue(""),n=new e.OutValue(0),o=new e.OutValue(0),r=new e.OutValue(0),i=void 0,s=void 0,a=0,c=0,l=this._richInfoList.length;l>c;c++)switch(i=this._richInfoList[c],this.calculateNewline(t,this._context.slice(a,i.getIndex())),a=i.getIndex(),i.getRichType()){case e.RichType.View:var u=i;this.calculateInsertImageAndPos(t,e.String.padLeft("",Math.ceil(u.size/this._bitWide),"	"),u.size,n,o,r),s=new eui.Image(u.name+"_png"),s.width=s.height=u.size,s.x=n.value,s.y=o.value,this.c_sprite.addChild(s);break;case e.RichType.Color:var h=i;if(h.getIndex()>=h.endIndex)e.Log.warning("设置文本文字颜色值失败，请检查开始索引和结束索引是否正确");else{a=i.endIndex;var p=this._context.slice(h.getIndex(),a),g=t.value.length;this.calculateNewline(t,p),t.value=t.value.slice(0,g)+"<font color="+h.color+">"+t.value.slice(g,t.value.length)+"</font>"}}a<this._context.length&&this.calculateNewline(t,this._context.slice(a,this._context.length)),this.t_context.textFlow=this._htmlText.parser(t.value)}},n.prototype.calculateNewline=function(e,t){if(this._maxWidth<=0)e.value+=t;else{var n=this.t_context.textFlow;if(this.t_context.textFlow=this._htmlText.parser(e.value+t),this.t_context.width>this._maxWidth)for(var o=0,r=t.length;r>o;o++)this.t_context.textFlow=this._htmlText.parser(e.value+t[0]),this.t_context.width>this._maxWidth&&(e.value+="\n"),e.value+=t[0],t=t.slice(1,t.length);else e.value=e.value+t;this.t_context.textFlow=n}},n.prototype.calculateInsertImageAndPos=function(t,n,o,r,i,s){var a=this.t_context.textFlow;if(this._maxWidth<=0)this.t_context.textFlow=this._htmlText.parser(t.value),r.value=this.t_context.width,t.value+=n;else{if(this.t_context.textFlow=this._htmlText.parser(t.value+n),this.t_context.width>this._maxWidth)t.value+=e.String.padLeft("",Math.ceil(o/this._bitHeight)+1,"\n"),this.t_context.textFlow=this._htmlText.parser(t.value),s.value=this.t_context.numLines,r.value=0,i.value=s.value*this._bitHeight-o;else if(s.value<this.t_context.numLines){var c=t.value.lastIndexOf("\n"),l=t.value.slice(0,c+1)+e.String.padLeft("",Math.ceil(o/this._bitHeight),"\n"),u=t.value.slice(c+1,t.value.length);this.t_context.textFlow=this._htmlText.parser(u),r.value=this.t_context.width,t.value=l+u,this.t_context.textFlow=this._htmlText.parser(t.value),s.value=this.t_context.numLines,i.value=s.value*this._bitHeight-o}else{var c=t.value.lastIndexOf("\n"),u=t.value.slice(c,t.value.length);this.t_context.textFlow=this._htmlText.parser(u),r.value=this.t_context.width,this.t_context.textFlow=this._htmlText.parser(t.value),i.value=s.value*this._bitHeight-o}t.value+=n}this.t_context.textFlow=a},n}(egret.Sprite);e.RichTextField=t,__reflect(t.prototype,"core.RichTextField",["core.IBasicObject"])}(core||(core={}));var eDragonBonesType;!function(e){e[e.Qingwa=0]="Qingwa",e[e.End=1]="End"}(eDragonBonesType||(eDragonBonesType={}));var CDragonBoneExtend=function(){function e(){this.InitData()}return e.prototype.InitData=function(){this.dragonBonesNameList=new Array(eDragonBonesType.End),this.dragonBonesNameList[eDragonBonesType.Qingwa]="qingwa"},e.prototype.SetDragonBoneDataByType=function(e){var t=dragonBones.EgretFactory.factory;if(null==this.dragonBonesNameList[e])return void core.Log.error("骨骼信息未定义,dragonBonesType:"+e);var n=t.getDragonBonesData(this.dragonBonesNameList[e]);if(n)return t.buildArmature(this.dragonBonesNameList[e]);var o,r,i,s;switch(e){case eDragonBonesType.Qingwa:o="qingwa_ske_json",r="qingwa_tex_json",i="qingwa_tex_png",s="qingwa"}return this.SetDragonBoneData(o,r,i,s)},e.prototype.SetDragonBoneData=function(e,t,n,o){var r=dragonBones.EgretFactory.factory;return r.parseDragonBonesData(RES.getRes(e),o),r.parseTextureAtlasData(RES.getRes(t),RES.getRes(n),o),r.buildArmature(o)},e.prototype.allDragonBonePlay=function(){return dragonBones.WorldClock.clock.advanceTime(-1),!0},e}();__reflect(CDragonBoneExtend.prototype,"CDragonBoneExtend");var core;!function(e){var t=function(){function e(){}return e.designSizeWidth=758,e.designSizeHeight=1136,e.designSizeAspectRatio=e.designSizeWidth/e.designSizeHeight,e.serverHttpRUL="ws://120.92.62.28:9021",e.serverIP="120.92.62.28",e.serverPort=9021,e.appkey="NrKzRqUqEdHfEiykWCaEk6f1vsEyCrBM",e}();e.GameConfig=t,__reflect(t.prototype,"core.GameConfig")}(core||(core={}));var GameView=function(e){function t(){return e.call(this,"resource/skins/mainSkin.exml")||this}return __extends(t,e),t.prototype.open=function(){var e=this;core.SoundManager.getInstance().playBgm("BGM_TITLE_mp3"),this.like.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){e.title.text="正好，我也喜欢你！",e.like.visible=!1,e.notlike.visible=!1,e.flower.visible=!0},this),this.notlike.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){e.flash()},this)},t.prototype.destroy=function(){},t.prototype.flash=function(){var e=this.flashBox.width-this.notlike.width,t=this.flashBox.height-this.notlike.height;this.notlike.x=this.flashBox.x+Math.random()*e,this.notlike.y=this.flashBox.y+Math.random()*t},t}(core.UIView);__reflect(GameView.prototype,"GameView");var GameViewControl=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.destroy=function(){this.gameView&&(this.gameView.parent.removeChild(this.gameView),this.gameView.destroy(),this.gameView=null),e.prototype.destroy.call(this)},t.prototype.open=function(){null==this.gameView&&(this.gameView=new GameView),this.getParent().addChild(this.gameView),this.gameView.open()},t.prototype.update=function(){},t}(core.ViewController);__reflect(GameViewControl.prototype,"GameViewControl");var LoadingView=function(e){function t(){return e.call(this,"resource/skins/LoadingSkin.exml")||this}return __extends(t,e),t.prototype.loaderSkinComplete=function(){},t.prototype.setProgress=function(e,t){this.t_loading.text=Math.floor(100*e/t)+"%"},t}(core.UIView);__reflect(LoadingView.prototype,"LoadingView");var LoadingViewControl=function(e){function t(){var t=e.call(this)||this;return t.isResLoaded=!1,t}return __extends(t,e),t.prototype.destroy=function(){this.close(),this.view=null,e.prototype.destroy.call(this)},t.prototype.open=function(){null==this.view&&(this.view=new LoadingView),this.getParent().addChild(this.view);var e="game",t=["game","sound"];core.LoadingManage.getInstance().loadGroups(e,t,this.onResourceLoadComplete,this.onResourceLoadProgress,this)},t.prototype.close=function(){null!=this.view&&this.view.parent&&this.view.parent.removeChild(this.view)},t.prototype.onResourceLoadComplete=function(){this.isResLoaded=!0,this.gameViewController=core.PageManage.getInstance().addViewControl(GameViewControl,core.ViewLayerType.SceneLayer,core.RemoveViewType.RemoveBefore)},t.prototype.onResourceLoadProgress=function(e,t){this.view.setProgress(e,t)},t}(core.ViewController);__reflect(LoadingViewControl.prototype,"LoadingViewControl");